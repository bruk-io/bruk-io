{"version":3,"file":"bh-accordion.js","sources":["../../../src/molecules/accordion/bh-accordion.ts"],"sourcesContent":["import { html, css } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { BaseElement } from '../../primitives/base-element.js';\nimport '../../atoms/icon/bh-icon.js';\n\n/**\n * A wrapper for collapsible accordion items.\n * Set `multiple` to allow more than one item open at a time.\n *\n * @slot - bh-accordion-item elements\n */\n@customElement('bh-accordion')\nexport class BhAccordion extends BaseElement {\n  static styles = [\n    ...([BaseElement.styles].flat()),\n    css`\n      :host {\n        display: block;\n      }\n    `,\n  ];\n\n  @property({ type: Boolean, reflect: true }) multiple = false;\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.addEventListener('bh-toggle', this._handleItemToggle as EventListener);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeEventListener('bh-toggle', this._handleItemToggle as EventListener);\n  }\n\n  private _handleItemToggle(e: CustomEvent<{ open: boolean; label: string }>) {\n    if (this.multiple || !e.detail.open) return;\n\n    // composedPath()[0] is the inner <button> inside the shadow root â€” walk up to\n    // find the bh-accordion-item host element instead.\n    const target = e.composedPath().find(\n      (el) => (el as Element).tagName === 'BH-ACCORDION-ITEM'\n    ) as Element | undefined;\n\n    const items = this.querySelectorAll('bh-accordion-item');\n    for (const item of items) {\n      if (item !== target && (item as BhAccordionItem).open) {\n        (item as BhAccordionItem).open = false;\n      }\n    }\n  }\n\n  render() {\n    return html`<slot></slot>`;\n  }\n}\n\n/**\n * A single collapsible section within a bh-accordion.\n *\n * @slot header - Custom header content (replaces default label text)\n * @slot - Content revealed when open\n *\n * @csspart header - The clickable header row\n * @csspart content - The collapsible content wrapper\n * @csspart chevron - The chevron indicator\n *\n * @cssprop [--bh-accordion-border=var(--bh-color-border)] - Border color\n *\n * @fires bh-toggle - Fired when item is opened or closed. `detail: { open: boolean, label: string }`\n */\n@customElement('bh-accordion-item')\nexport class BhAccordionItem extends BaseElement {\n  static styles = [\n    ...([BaseElement.styles].flat()),\n    css`\n      :host {\n        display: block;\n        border-bottom: var(--bh-border-1) solid var(--bh-accordion-border, var(--bh-color-border));\n      }\n\n      .header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding: var(--bh-spacing-3) var(--bh-spacing-4);\n        cursor: pointer;\n        user-select: none;\n        font-family: var(--bh-font-sans);\n        font-size: var(--bh-text-sm);\n        color: var(--bh-color-text);\n        background: none;\n        border: none;\n        width: 100%;\n        text-align: start;\n      }\n\n      .header:hover {\n        background: var(--bh-color-surface);\n      }\n\n      .header:focus-visible {\n        outline: var(--bh-border-2) solid var(--bh-color-ring);\n        outline-offset: -2px;\n      }\n\n      .chevron {\n        display: inline-flex;\n        transition: transform var(--bh-transition-fast);\n        color: var(--bh-color-text-muted);\n        flex-shrink: 0;\n      }\n\n      :host([open]) .chevron {\n        transform: rotate(90deg);\n      }\n\n      .content-wrapper {\n        display: grid;\n        grid-template-rows: 0fr;\n        transition: grid-template-rows var(--bh-transition-fast);\n      }\n\n      :host([open]) .content-wrapper {\n        grid-template-rows: 1fr;\n      }\n\n      .content {\n        overflow: hidden;\n      }\n\n      .content-inner {\n        padding: 0 var(--bh-spacing-4) var(--bh-spacing-3);\n      }\n    `,\n  ];\n\n  @property() label = '';\n  @property({ type: Boolean, reflect: true }) open = false;\n\n  render() {\n    return html`\n      <button\n        class=\"header\"\n        part=\"header\"\n        aria-expanded=${this.open}\n        aria-controls=\"accordion-content\"\n        @click=${this._toggle}\n      >\n        <slot name=\"header\">${this.label}</slot>\n        <bh-icon class=\"chevron\" part=\"chevron\" name=\"chevron-right\" size=\"sm\" aria-hidden=\"true\"></bh-icon>\n      </button>\n      <div class=\"content-wrapper\">\n        <div id=\"accordion-content\" class=\"content\" part=\"content\">\n          <div class=\"content-inner\">\n            <slot></slot>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  private _toggle() {\n    this.open = !this.open;\n    this.dispatchEvent(\n      new CustomEvent('bh-toggle', {\n        bubbles: true,\n        composed: true,\n        detail: { open: this.open, label: this.label },\n      })\n    );\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'bh-accordion': BhAccordion;\n    'bh-accordion-item': BhAccordionItem;\n  }\n}\n"],"names":["BhAccordion","BaseElement","e","target","el","items","item","html","css","__decorateClass","property","customElement","BhAccordionItem"],"mappings":";;;;;;;;;AAYO,IAAMA,IAAN,cAA0BC,EAAY;AAAA,EAAtC,cAAA;AAAA,UAAA,GAAA,SAAA,GAUuC,KAAA,WAAW;AAAA,EAAA;AAAA,EAEvD,oBAAoB;AAClB,UAAM,kBAAA,GACN,KAAK,iBAAiB,aAAa,KAAK,iBAAkC;AAAA,EAC5E;AAAA,EAEA,uBAAuB;AACrB,UAAM,qBAAA,GACN,KAAK,oBAAoB,aAAa,KAAK,iBAAkC;AAAA,EAC/E;AAAA,EAEQ,kBAAkBC,GAAkD;AAC1E,QAAI,KAAK,YAAY,CAACA,EAAE,OAAO,KAAM;AAIrC,UAAMC,IAASD,EAAE,aAAA,EAAe;AAAA,MAC9B,CAACE,MAAQA,EAAe,YAAY;AAAA,IAAA,GAGhCC,IAAQ,KAAK,iBAAiB,mBAAmB;AACvD,eAAWC,KAAQD;AACjB,MAAIC,MAASH,KAAWG,EAAyB,SAC9CA,EAAyB,OAAO;AAAA,EAGvC;AAAA,EAEA,SAAS;AACP,WAAOC;AAAA,EACT;AACF;AA1CaP,EACJ,SAAS;AAAA,EACd,GAAI,CAACC,EAAY,MAAM,EAAE,KAAA;AAAA,EACzBO;AAAA;AAAA;AAAA;AAAA;AAKF;AAE4CC,EAAA;AAAA,EAA3CC,EAAS,EAAE,MAAM,SAAS,SAAS,IAAM;AAAA,GAV/BV,EAUiC,WAAA,YAAA,CAAA;AAVjCA,IAANS,EAAA;AAAA,EADNE,EAAc,cAAc;AAAA,GAChBX,CAAA;AA2DN,IAAMY,IAAN,cAA8BX,EAAY;AAAA,EAA1C,cAAA;AAAA,UAAA,GAAA,SAAA,GAiEO,KAAA,QAAQ,IACwB,KAAA,OAAO;AAAA,EAAA;AAAA,EAEnD,SAAS;AACP,WAAOM;AAAA;AAAA;AAAA;AAAA,wBAIa,KAAK,IAAI;AAAA;AAAA,iBAEhB,KAAK,OAAO;AAAA;AAAA,8BAEC,KAAK,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWtC;AAAA,EAEQ,UAAU;AAChB,SAAK,OAAO,CAAC,KAAK,MAClB,KAAK;AAAA,MACH,IAAI,YAAY,aAAa;AAAA,QAC3B,SAAS;AAAA,QACT,UAAU;AAAA,QACV,QAAQ,EAAE,MAAM,KAAK,MAAM,OAAO,KAAK,MAAA;AAAA,MAAM,CAC9C;AAAA,IAAA;AAAA,EAEL;AACF;AApGaK,EACJ,SAAS;AAAA,EACd,GAAI,CAACX,EAAY,MAAM,EAAE,KAAA;AAAA,EACzBO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA4DF;AAEYC,EAAA;AAAA,EAAXC,EAAA;AAAS,GAjECE,EAiEC,WAAA,SAAA,CAAA;AACgCH,EAAA;AAAA,EAA3CC,EAAS,EAAE,MAAM,SAAS,SAAS,IAAM;AAAA,GAlE/BE,EAkEiC,WAAA,QAAA,CAAA;AAlEjCA,IAANH,EAAA;AAAA,EADNE,EAAc,mBAAmB;AAAA,GACrBC,CAAA;"}