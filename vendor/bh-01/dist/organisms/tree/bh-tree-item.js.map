{"version":3,"file":"bh-tree-item.js","sources":["../../../src/organisms/tree/bh-tree-item.ts"],"sourcesContent":["import { html, css, nothing } from 'lit';\nimport { customElement, property, state } from 'lit/decorators.js';\nimport { BaseElement } from '../../primitives/base-element.js';\nimport '../../atoms/icon/bh-icon.js';\n\n/**\n * An individual tree node that supports nesting, expand/collapse, and selection.\n *\n * @slot icon - Icon slot (before label)\n * @slot end - Trailing content slot (badges, actions)\n * @slot children - Nested tree items\n *\n * @csspart row - The clickable row element\n * @csspart chevron - The expand/collapse chevron\n * @csspart label - The label text\n *\n * @cssprop [--bh-tree-item-hover-bg=var(--bh-color-secondary)] - Hover background\n * @cssprop [--bh-tree-item-selected-bg=var(--bh-color-surface-raised)] - Selected background\n * @cssprop [--bh-tree-item-selected-color=var(--bh-color-primary)] - Selected text color\n *\n * @fires bh-tree-item-click - Fired on click. `detail: { value: string, label: string }`\n */\n@customElement('bh-tree-item')\nexport class BhTreeItem extends BaseElement {\n  static styles = [\n    ...([BaseElement.styles].flat()),\n    css`\n      :host {\n        display: block;\n      }\n\n      .row {\n        display: flex;\n        align-items: center;\n        gap: var(--bh-spacing-2);\n        width: 100%;\n        padding: var(--bh-spacing-1) var(--bh-spacing-2);\n        padding-left: calc(var(--bh-spacing-4) + var(--indent-level) * var(--bh-spacing-4));\n        border: none;\n        border-left: var(--bh-border-2) solid transparent;\n        border-radius: 0;\n        background: none;\n        color: var(--bh-color-text);\n        font-family: var(--bh-font-sans);\n        font-size: var(--bh-text-sm);\n        line-height: var(--bh-leading-normal);\n        text-align: left;\n        cursor: pointer;\n        transition: background var(--bh-transition-fast),\n                    color var(--bh-transition-fast);\n      }\n\n      .row:hover {\n        background: var(--bh-tree-item-hover-bg, var(--bh-color-secondary));\n      }\n\n      .row:focus-visible {\n        outline: var(--bh-border-2) solid var(--bh-color-ring);\n        outline-offset: -2px;\n      }\n\n      :host([selected]) .row {\n        background: var(--bh-tree-item-selected-bg, var(--bh-color-surface-raised));\n        color: var(--bh-tree-item-selected-color, var(--bh-color-primary));\n        border-left-color: var(--bh-color-primary);\n      }\n\n      .chevron {\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        width: var(--bh-spacing-4);\n        height: var(--bh-spacing-4);\n        flex-shrink: 0;\n        transition: transform var(--bh-transition-fast);\n      }\n\n      :host([expanded]) .chevron {\n        transform: rotate(90deg);\n      }\n\n      .chevron-placeholder {\n        width: var(--bh-spacing-4);\n        height: var(--bh-spacing-4);\n        flex-shrink: 0;\n      }\n\n      .label {\n        flex: 1;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n\n      .end {\n        margin-left: auto;\n        flex-shrink: 0;\n      }\n\n      .children {\n        display: none;\n      }\n\n      :host([expanded]) .children {\n        display: block;\n      }\n    `,\n  ];\n\n  @property() value = '';\n  @property() label = '';\n  @property({ type: Boolean, reflect: true }) selected = false;\n  @property({ type: Boolean, reflect: true }) expanded = false;\n  @property({ type: Number }) indent = 0;\n  /**\n   * @internal - managed by bh-tree for roving tabindex.\n   * When true this item is the keyboard entry point into the tree.\n   */\n  @property({ type: Boolean }) roving = false;\n\n  @state() private _hasChildren = false;\n\n  render() {\n    return html`\n      <div\n        class=\"row\"\n        part=\"row\"\n        role=\"treeitem\"\n        aria-level=${this.indent + 1}\n        aria-expanded=${this._hasChildren ? String(this.expanded) : nothing}\n        aria-selected=${String(this.selected)}\n        tabindex=${this.selected || this.roving ? '0' : '-1'}\n        style=\"--indent-level: ${this.indent}\"\n        @click=${this._handleClick}\n        @keydown=${this._handleKeydown}\n      >\n        ${this._hasChildren\n          ? html`<bh-icon class=\"chevron\" part=\"chevron\" name=\"chevron-right\" size=\"sm\" aria-hidden=\"true\"></bh-icon>`\n          : html`<span class=\"chevron-placeholder\"></span>`}\n        <slot name=\"icon\"></slot>\n        <span class=\"label\" part=\"label\">${this.label}</span>\n        <span class=\"end\"><slot name=\"end\"></slot></span>\n      </div>\n      <div class=\"children\" role=\"group\">\n        <slot name=\"children\" @slotchange=${this._onChildrenSlotChange}></slot>\n      </div>\n    `;\n  }\n\n  private _onChildrenSlotChange(e: Event) {\n    const slot = e.target as HTMLSlotElement;\n    this._hasChildren = slot.assignedElements().length > 0;\n  }\n\n  private _handleClick() {\n    if (this._hasChildren) {\n      this.expanded = !this.expanded;\n    }\n    this.dispatchEvent(\n      new CustomEvent('bh-tree-item-click', {\n        bubbles: true,\n        composed: true,\n        detail: { value: this.value, label: this.label },\n      })\n    );\n  }\n\n  private _handleKeydown(e: KeyboardEvent) {\n    if (e.key === 'Enter' || e.key === ' ') {\n      e.preventDefault();\n      this._handleClick();\n    } else if (e.key === 'ArrowRight' && this._hasChildren && !this.expanded) {\n      e.preventDefault();\n      this.expanded = true;\n    } else if (e.key === 'ArrowLeft' && this.expanded) {\n      e.preventDefault();\n      this.expanded = false;\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'bh-tree-item': BhTreeItem;\n  }\n}\n"],"names":["BhTreeItem","BaseElement","html","nothing","slot","css","__decorateClass","property","state","customElement"],"mappings":"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"}