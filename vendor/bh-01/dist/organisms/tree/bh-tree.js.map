{"version":3,"file":"bh-tree.js","sources":["../../../src/organisms/tree/bh-tree.ts"],"sourcesContent":["import { html, css } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { BaseElement } from '../../primitives/base-element.js';\nimport type { BhTreeItem } from './bh-tree-item.js';\nimport './bh-tree-item.js';\n\n/**\n * A tree container that manages selection across nested bh-tree-items.\n *\n * @slot - Tree items (bh-tree-item elements)\n *\n * @fires bh-select - Fired when a tree item is selected. `detail: { value: string, label: string }`\n */\n@customElement('bh-tree')\nexport class BhTree extends BaseElement {\n  static styles = [\n    ...([BaseElement.styles].flat()),\n    css`\n      :host {\n        display: block;\n      }\n    `,\n  ];\n\n  @property() selected = '';\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.addEventListener('bh-tree-item-click', this._onItemClick as EventListener);\n    this.setAttribute('role', 'tree');\n    this._updateSelection();\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeEventListener('bh-tree-item-click', this._onItemClick as EventListener);\n  }\n\n  updated(changed: Map<string, unknown>) {\n    if (changed.has('selected')) {\n      this._updateSelection();\n    }\n  }\n\n  render() {\n    return html`<slot></slot>`;\n  }\n\n  private _onItemClick = (e: CustomEvent<{ value: string; label: string }>) => {\n    const { value, label } = e.detail;\n    this.selected = value;\n    this.dispatchEvent(\n      new CustomEvent('bh-select', {\n        bubbles: true,\n        composed: true,\n        detail: { value, label },\n      })\n    );\n  };\n\n  private _updateSelection() {\n    const items = this.querySelectorAll('bh-tree-item') as NodeListOf<BhTreeItem>;\n    let hasSelected = false;\n    items.forEach((item) => {\n      item.selected = item.value === this.selected;\n      item.roving = false;\n      if (item.selected) hasSelected = true;\n    });\n    // Roving tabindex: if nothing is selected, make the first item keyboard-reachable\n    // so the tree is always accessible via Tab.\n    if (!hasSelected && items.length > 0) {\n      items[0].roving = true;\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'bh-tree': BhTree;\n  }\n}\n"],"names":["BhTree","BaseElement","value","label","changed","html","items","hasSelected","item","css","__decorateClass","property","customElement"],"mappings":";;;;;;;;;AAcO,IAAMA,IAAN,cAAqBC,EAAY;AAAA,EAAjC,cAAA;AAAA,UAAA,GAAA,SAAA,GAUO,KAAA,WAAW,IAwBvB,KAAQ,eAAe,CAAC,MAAqD;AAC3E,YAAM,EAAE,OAAAC,GAAO,OAAAC,EAAA,IAAU,EAAE;AAC3B,WAAK,WAAWD,GAChB,KAAK;AAAA,QACH,IAAI,YAAY,aAAa;AAAA,UAC3B,SAAS;AAAA,UACT,UAAU;AAAA,UACV,QAAQ,EAAE,OAAAA,GAAO,OAAAC,EAAA;AAAA,QAAM,CACxB;AAAA,MAAA;AAAA,IAEL;AAAA,EAAA;AAAA,EAhCA,oBAAoB;AAClB,UAAM,kBAAA,GACN,KAAK,iBAAiB,sBAAsB,KAAK,YAA6B,GAC9E,KAAK,aAAa,QAAQ,MAAM,GAChC,KAAK,iBAAA;AAAA,EACP;AAAA,EAEA,uBAAuB;AACrB,UAAM,qBAAA,GACN,KAAK,oBAAoB,sBAAsB,KAAK,YAA6B;AAAA,EACnF;AAAA,EAEA,QAAQC,GAA+B;AACrC,IAAIA,EAAQ,IAAI,UAAU,KACxB,KAAK,iBAAA;AAAA,EAET;AAAA,EAEA,SAAS;AACP,WAAOC;AAAA,EACT;AAAA,EAcQ,mBAAmB;AACzB,UAAMC,IAAQ,KAAK,iBAAiB,cAAc;AAClD,QAAIC,IAAc;AAClB,IAAAD,EAAM,QAAQ,CAACE,MAAS;AACtB,MAAAA,EAAK,WAAWA,EAAK,UAAU,KAAK,UACpCA,EAAK,SAAS,IACVA,EAAK,aAAUD,IAAc;AAAA,IACnC,CAAC,GAGG,CAACA,KAAeD,EAAM,SAAS,MACjCA,EAAM,CAAC,EAAE,SAAS;AAAA,EAEtB;AACF;AA5DaN,EACJ,SAAS;AAAA,EACd,GAAI,CAACC,EAAY,MAAM,EAAE,KAAA;AAAA,EACzBQ;AAAA;AAAA;AAAA;AAAA;AAKF;AAEYC,EAAA;AAAA,EAAXC,EAAA;AAAS,GAVCX,EAUC,WAAA,YAAA,CAAA;AAVDA,IAANU,EAAA;AAAA,EADNE,EAAc,SAAS;AAAA,GACXZ,CAAA;"}